<!--<2% if @save_result == true %>-->
<!--  <script>-->
<!--    alert("예약되었습니다");-->
<!--  </script>-->
  
<!--<2% else %>-->
<!--  <script>-->
<!--    alert("지정한 시간에는 이미 예약이 있습니다.");-->
<!--  </script>-->
  
<!--<2% end %>-->




<div class="well">
  <center><strong><%=@date.to_date.year%>년 <%=@date.to_date.month%>월 <%=@date.to_date.day%>일의 <%=@class.room_number%>호</strong>에 대한 예약현황입니다.</center>
  <center><a href="/book/booking/<%=@class.id%>&date=<%=@date%>" class="btn btn-warning">예약하기</a></center>
</div>

<div class="col-md-4">
  <div class="panel panel-info">
    <div class="panel-heading">
      <h3 class="panel-title"><center>예약 현황을 볼 날짜를 선택해라</center></h3>
    </div>
    <div class="panel-body">
      <center>
      <div class="well">
        <form action="/book/view_booking" method="POST">
          <input type="date" name="show_date" required> 
          <input type="hidden" name="id" value="<%=@class.id%>"> 
          <button type="submit"class="btn btn-primary btn-sm">날짜 검색</button>
        </form>
      </div>
       </center>
    </div>
  </div>
  
 
  <div class="panel panel-info">
    
    <div class="panel-heading">
      <h3 class="panel-title"><center>예약 타임 테이블 </center></h3>
    </div>
    
    <div class="panel-body">
      <table class="table table-striped table-hover ">
        <thead>
          <tr>
            <th width="15%">시간 \ 요일</th>
            <th id="월">월</th>
            <th id="화">화</th>
            <th id="수">수</th>
            <th id="목">목</th>
            <th id="금">금</th>

          </tr>
        </thead>
        <tbody>
          <tr>
            <td id="1교시">09:00 - 10:00</td>
            <td id="월1"></td>
            <td id="화1"></td>
            <td id="수1"></td>
            <td id="목1"></td>
            <td id="금1"></td>
          </tr>
          
          <tr>
            <td id="2교시">10:00 - 11:00</td>
            <td id="월2"></td>
            <td id="화2"></td>
            <td id="수2"></td>
            <td id="목2"></td>
            <td id="금2"></td>
          </tr>
          <tr>
            <td id="3교시">12:00 - 13:00</td>
            <td id="월3"></td>
            <td id="화3"></td>
            <td id="수3"></td>
            <td id="목3"></td>
            <td id="금3"></td>
          </tr>
          <tr>
            <td id="4교시">13:00 - 14:00</td>
            <td id="월4"></td>
            <td id="화4"></td>
            <td id="수4"></td>
            <td id="목4"></td>
            <td id="금4"></td>
          </tr>
          <tr>
            <td id="5교시">14:00 - 15:00</td>
            <td id="월5"></td>
            <td id="화5"></td>
            <td id="수5"></td>
            <td id="목5"></td>
            <td id="금5"></td>
          </tr>
          <tr>
            <td id="6교시">15:00 - 16:00</td>
            <td id="월6"></td>
            <td id="화6"></td>
            <td id="수6"></td>
            <td id="목6"></td>
            <td id="금6"></td>
          </tr>
          <tr>
            <td id="7교시">16:00 - 17:00</td>
            <td id="월7"></td>
            <td id="화7"></td>
            <td id="수7"></td>
            <td id="목7"></td>
            <td id="금7"></td>
          </tr>
          <tr>
            <td id="8교시">17:00 - 18:00</td>
            <td id="월8"></td>
            <td id="화8"></td>
            <td id="수8"></td>
            <td id="목8"></td>
            <td id="금8"></td>
          </tr>
          <tr>
            <td id="9교시">18:00 - 19:00</td>
            <td id="월9"></td>
            <td id="화9"></td>
            <td id="수9"></td>
            <td id="목9"></td>
            <td id="금9"></td>
          </tr>
        </tbody>
      </table>
    </div>
      
  </div>
</div>


<div class="col-md-8">
  <table class="table table-striped table-hover ">
    <thead>
      <tr class="info">
        <th>#</th>
        <th>사용자 이름</th>
        <th>사용날짜</th>
        <th>사용시간</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @class.reservations.where(date: @date).each do |c| %>
          <tr>
            <td><%=c.id%></td>
            <td><%=c.user%></td>
            <td><%=c.date%></td>
            <td><%=c.start_time.to_s(:db)%> ~ <%=c.finish_time.to_s(:db)%></td>
            
            <td><button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#show<%=c.id%>" id = "good">예약 대기</button></td>
            <td><button class="btn btn-primary btn-sm" data_toggle="modal" data-target="" id = "bad" >예약 취소</button></td>
          </tr>

      <% end %>
    </tbody>
  </table> 
</div>


<% @class.reservations.where(date: @date).each do |c| %>

<!--<div id=" #data-target <2%=c.id%>" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">-->
<!--  <div class="modal-dialog">-->
<!--    <div class="modal-content">-->
<!--      <div class="modal-header">-->
<!--        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>-->
<!--        <h4 class="modal-title" id="exampleModalLabel">예약 취소</h4>-->
<!--      </div>-->
<!--      <div class="modal-body">-->
        <!--<div class="form-group">-->
        <!--  <label for="recipient-name" class="control-label">예약을 취소하시겠습니까?</label>-->
        <!--</div>-->
<!--        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
            <!--<form>-->
              
            </form>
<!--        <button type="submit" class="btn btn-primary" id = "#" >취소하기</button>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->

<div class="modal-footer">
      
          
<div id="show<%=c.id%>" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="exampleModalLabel"> 예약 상세 보기</h4>
      </div>
      <div class="modal-body">
        
        <div class="form-group">
          <label for="recipient-name" class="control-label">사용자</label>
          <%=c.user%>
        </div>
        
        
        <div class="form-group">
          <label for="recipient-name" class="control-label">사용시간</label>
          <%=c.start_time.to_s(:db)%> ~ <%=c.finish_time.to_s(:db)%>
        </div>
        
        <div class="form-group">
          <label for="recipient-name" class="control-label">사용목적</label>
          <%=c.purpose%>
        </div>
        
        <div class="form-group">
          <label for="recipient-name" class="control-label">담당 교수</label>
          <%=c.professor%>            
        </div>
      </div>
      
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
       
      
       <script>
      
           $(function(){
               $("#ok").click(function () {
                    $("#good").text(function(text){
                        return text = "승인완료";
                        
                        // 저장
                    })
               });
            })

        </script>




        <button type="button"  ng-click="save()" class="btn btn-primary" id = "ok" >승인하기</button>

      </div>
    </div>
  </div>
</div>
<%end%>